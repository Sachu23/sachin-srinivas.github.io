{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _mapToZero = _interopRequireDefault(require(\"./mapToZero\"));\nvar _stripStyle = _interopRequireDefault(require(\"./stripStyle\"));\nvar _stepper3 = _interopRequireDefault(require(\"./stepper\"));\nvar _mergeDiff = _interopRequireDefault(require(\"./mergeDiff\"));\nvar _performanceNow = _interopRequireDefault(require(\"performance-now\"));\nvar _raf = _interopRequireDefault(require(\"raf\"));\nvar _shouldStopAnimation = _interopRequireDefault(require(\"./shouldStopAnimation\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nvar msPerFrame = 1000 / 60; // the children function & (potential) styles function asks as param an\n// Array<TransitionPlainStyle>, where each TransitionPlainStyle is of the format\n// {key: string, data?: any, style: PlainStyle}. However, the way we keep\n// internal states doesn't contain such a data structure (check the state and\n// TransitionMotionState). So when children function and others ask for such\n// data we need to generate them on the fly by combining mergedPropsStyles and\n// currentStyles/lastIdealStyles\n\nfunction rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {\n  // Copy the value to a `const` so that Flow understands that the const won't\n  // change and will be non-nullable in the callback below.\n  var cUnreadPropStyles = unreadPropStyles;\n  if (cUnreadPropStyles == null) {\n    return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n      return {\n        key: mergedPropsStyle.key,\n        data: mergedPropsStyle.data,\n        style: plainStyles[i]\n      };\n    });\n  }\n  return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n    for (var j = 0; j < cUnreadPropStyles.length; j++) {\n      if (cUnreadPropStyles[j].key === mergedPropsStyle.key) {\n        return {\n          key: cUnreadPropStyles[j].key,\n          data: cUnreadPropStyles[j].data,\n          style: plainStyles[i]\n        };\n      }\n    }\n    return {\n      key: mergedPropsStyle.key,\n      data: mergedPropsStyle.data,\n      style: plainStyles[i]\n    };\n  });\n}\nfunction shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {\n  if (mergedPropsStyles.length !== destStyles.length) {\n    return false;\n  }\n  for (var i = 0; i < mergedPropsStyles.length; i++) {\n    if (mergedPropsStyles[i].key !== destStyles[i].key) {\n      return false;\n    }\n  } // we have the invariant that mergedPropsStyles and\n  // currentStyles/currentVelocities/last* are synced in terms of cells, see\n  // mergeAndSync comment for more info\n\n  for (var _i = 0; _i < mergedPropsStyles.length; _i++) {\n    if (!(0, _shouldStopAnimation[\"default\"])(currentStyles[_i], destStyles[_i].style, currentVelocities[_i])) {\n      return false;\n    }\n  }\n  return true;\n} // core key merging logic\n// things to do: say previously merged style is {a, b}, dest style (prop) is {b,\n// c}, previous current (interpolating) style is {a, b}\n// **invariant**: current[i] corresponds to merged[i] in terms of key\n// steps:\n// turn merged style into {a?, b, c}\n//    add c, value of c is destStyles.c\n//    maybe remove a, aka call willLeave(a), then merged is either {b, c} or {a, b, c}\n// turn current (interpolating) style from {a, b} into {a?, b, c}\n//    maybe remove a\n//    certainly add c, value of c is willEnter(c)\n// loop over merged and construct new current\n// dest doesn't change, that's owner's\n\nfunction mergeAndSync(willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {\n  var newMergedPropsStyles = (0, _mergeDiff[\"default\"])(oldMergedPropsStyles, destStyles, function (oldIndex, oldMergedPropsStyle) {\n    var leavingStyle = willLeave(oldMergedPropsStyle);\n    if (leavingStyle == null) {\n      didLeave({\n        key: oldMergedPropsStyle.key,\n        data: oldMergedPropsStyle.data\n      });\n      return null;\n    }\n    if ((0, _shouldStopAnimation[\"default\"])(oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {\n      didLeave({\n        key: oldMergedPropsStyle.key,\n        data: oldMergedPropsStyle.data\n      });\n      return null;\n    }\n    return {\n      key: oldMergedPropsStyle.key,\n      data: oldMergedPropsStyle.data,\n      style: leavingStyle\n    };\n  });\n  var newCurrentStyles = [];\n  var newCurrentVelocities = [];\n  var newLastIdealStyles = [];\n  var newLastIdealVelocities = [];\n  for (var i = 0; i < newMergedPropsStyles.length; i++) {\n    var newMergedPropsStyleCell = newMergedPropsStyles[i];\n    var foundOldIndex = null;\n    for (var j = 0; j < oldMergedPropsStyles.length; j++) {\n      if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {\n        foundOldIndex = j;\n        break;\n      }\n    } // TODO: key search code\n\n    if (foundOldIndex == null) {\n      var plainStyle = willEnter(newMergedPropsStyleCell);\n      newCurrentStyles[i] = plainStyle;\n      newLastIdealStyles[i] = plainStyle;\n      var velocity = (0, _mapToZero[\"default\"])(newMergedPropsStyleCell.style);\n      newCurrentVelocities[i] = velocity;\n      newLastIdealVelocities[i] = velocity;\n    } else {\n      newCurrentStyles[i] = oldCurrentStyles[foundOldIndex];\n      newLastIdealStyles[i] = oldLastIdealStyles[foundOldIndex];\n      newCurrentVelocities[i] = oldCurrentVelocities[foundOldIndex];\n      newLastIdealVelocities[i] = oldLastIdealVelocities[foundOldIndex];\n    }\n  }\n  return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];\n}\nvar TransitionMotion = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(TransitionMotion, _React$Component);\n\n  // it's possible that currentStyle's value is stale: if props is immediately\n  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n  // at 0 (didn't have time to tick and interpolate even once). If we naively\n  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n  // In reality currentStyle should be 400\n  function TransitionMotion(props) {\n    var _this;\n    _this = _React$Component.call(this, props) || this;\n    _this.unmounting = false;\n    _this.animationID = null;\n    _this.prevTime = 0;\n    _this.accumulatedTime = 0;\n    _this.unreadPropStyles = null;\n    _this.clearUnreadPropStyle = function (unreadPropStyles) {\n      var _mergeAndSync = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, unreadPropStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities),\n        mergedPropsStyles = _mergeAndSync[0],\n        currentStyles = _mergeAndSync[1],\n        currentVelocities = _mergeAndSync[2],\n        lastIdealStyles = _mergeAndSync[3],\n        lastIdealVelocities = _mergeAndSync[4];\n      for (var i = 0; i < unreadPropStyles.length; i++) {\n        var unreadPropStyle = unreadPropStyles[i].style;\n        var dirty = false;\n        for (var key in unreadPropStyle) {\n          if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {\n            continue;\n          }\n          var styleValue = unreadPropStyle[key];\n          if (typeof styleValue === 'number') {\n            if (!dirty) {\n              dirty = true;\n              currentStyles[i] = _extends({}, currentStyles[i]);\n              currentVelocities[i] = _extends({}, currentVelocities[i]);\n              lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n              lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n              mergedPropsStyles[i] = {\n                key: mergedPropsStyles[i].key,\n                data: mergedPropsStyles[i].data,\n                style: _extends({}, mergedPropsStyles[i].style)\n              };\n            }\n            currentStyles[i][key] = styleValue;\n            currentVelocities[i][key] = 0;\n            lastIdealStyles[i][key] = styleValue;\n            lastIdealVelocities[i][key] = 0;\n            mergedPropsStyles[i].style[key] = styleValue;\n          }\n        }\n      } // unlike the other 2 components, we can't detect staleness and optionally\n      // opt out of setState here. each style object's data might contain new\n      // stuff we're not/cannot compare\n\n      _this.setState({\n        currentStyles: currentStyles,\n        currentVelocities: currentVelocities,\n        mergedPropsStyles: mergedPropsStyles,\n        lastIdealStyles: lastIdealStyles,\n        lastIdealVelocities: lastIdealVelocities\n      });\n    };\n    _this.startAnimationIfNecessary = function () {\n      if (_this.unmounting || _this.animationID != null) {\n        return;\n      } // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n\n      _this.animationID = (0, _raf[\"default\"])(function (timestamp) {\n        // https://github.com/chenglou/react-motion/pull/420\n        // > if execution passes the conditional if (this.unmounting), then\n        // executes async defaultRaf and after that component unmounts and after\n        // that the callback of defaultRaf is called, then setState will be called\n        // on unmounted component.\n        if (_this.unmounting) {\n          return;\n        }\n        var propStyles = _this.props.styles;\n        var destStyles = typeof propStyles === 'function' ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles; // check if we need to animate in the first place\n\n        if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.accumulatedTime = 0;\n          return;\n        }\n        var currentTime = timestamp || (0, _performanceNow[\"default\"])();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta; // more than 10 frames? prolly switched browser tab. Restart\n\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n        var _mergeAndSync2 = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities),\n          newMergedPropsStyles = _mergeAndSync2[0],\n          newCurrentStyles = _mergeAndSync2[1],\n          newCurrentVelocities = _mergeAndSync2[2],\n          newLastIdealStyles = _mergeAndSync2[3],\n          newLastIdealVelocities = _mergeAndSync2[4];\n        for (var i = 0; i < newMergedPropsStyles.length; i++) {\n          var newMergedPropsStyle = newMergedPropsStyles[i].style;\n          var newCurrentStyle = {};\n          var newCurrentVelocity = {};\n          var newLastIdealStyle = {};\n          var newLastIdealVelocity = {};\n          for (var key in newMergedPropsStyle) {\n            if (!Object.prototype.hasOwnProperty.call(newMergedPropsStyle, key)) {\n              continue;\n            }\n            var styleValue = newMergedPropsStyle[key];\n            if (typeof styleValue === 'number') {\n              newCurrentStyle[key] = styleValue;\n              newCurrentVelocity[key] = 0;\n              newLastIdealStyle[key] = styleValue;\n              newLastIdealVelocity[key] = 0;\n            } else {\n              var newLastIdealStyleValue = newLastIdealStyles[i][key];\n              var newLastIdealVelocityValue = newLastIdealVelocities[i][key];\n              for (var j = 0; j < framesToCatchUp; j++) {\n                var _stepper = (0, _stepper3[\"default\"])(msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n                newLastIdealStyleValue = _stepper[0];\n                newLastIdealVelocityValue = _stepper[1];\n              }\n              var _stepper2 = (0, _stepper3[\"default\"])(msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision),\n                nextIdealX = _stepper2[0],\n                nextIdealV = _stepper2[1];\n              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n              newLastIdealStyle[key] = newLastIdealStyleValue;\n              newLastIdealVelocity[key] = newLastIdealVelocityValue;\n            }\n          }\n          newLastIdealStyles[i] = newLastIdealStyle;\n          newLastIdealVelocities[i] = newLastIdealVelocity;\n          newCurrentStyles[i] = newCurrentStyle;\n          newCurrentVelocities[i] = newCurrentVelocity;\n        }\n        _this.animationID = null; // the amount we're looped over above\n\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n        _this.setState({\n          currentStyles: newCurrentStyles,\n          currentVelocities: newCurrentVelocities,\n          lastIdealStyles: newLastIdealStyles,\n          lastIdealVelocities: newLastIdealVelocities,\n          mergedPropsStyles: newMergedPropsStyles\n        });\n        _this.unreadPropStyles = null;\n        _this.startAnimationIfNecessary();\n      });\n    };\n    _this.state = _this.defaultState();\n    return _this;\n  }\n  var _proto = TransitionMotion.prototype;\n  _proto.defaultState = function defaultState() {\n    var _this$props = this.props,\n      defaultStyles = _this$props.defaultStyles,\n      styles = _this$props.styles,\n      willEnter = _this$props.willEnter,\n      willLeave = _this$props.willLeave,\n      didLeave = _this$props.didLeave;\n    var destStyles = typeof styles === 'function' ? styles(defaultStyles) : styles; // this is special. for the first time around, we don't have a comparison\n    // between last (no last) and current merged props. we'll compute last so:\n    // say default is {a, b} and styles (dest style) is {b, c}, we'll\n    // fabricate last as {a, b}\n\n    var oldMergedPropsStyles;\n    if (defaultStyles == null) {\n      oldMergedPropsStyles = destStyles;\n    } else {\n      oldMergedPropsStyles = defaultStyles.map(function (defaultStyleCell) {\n        // TODO: key search code\n        for (var i = 0; i < destStyles.length; i++) {\n          if (destStyles[i].key === defaultStyleCell.key) {\n            return destStyles[i];\n          }\n        }\n        return defaultStyleCell;\n      });\n    }\n    var oldCurrentStyles = defaultStyles == null ? destStyles.map(function (s) {\n      return (0, _stripStyle[\"default\"])(s.style);\n    }) : defaultStyles.map(function (s) {\n      return (0, _stripStyle[\"default\"])(s.style);\n    });\n    var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function (s) {\n      return (0, _mapToZero[\"default\"])(s.style);\n    }) : defaultStyles.map(function (s) {\n      return (0, _mapToZero[\"default\"])(s.style);\n    });\n    var _mergeAndSync3 = mergeAndSync(\n      // Because this is an old-style createReactClass component, Flow doesn't\n      // understand that the willEnter and willLeave props have default values\n      // and will always be present.\n      willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldCurrentStyles,\n      // oldLastIdealStyles really\n      oldCurrentVelocities // oldLastIdealVelocities really\n      ),\n      mergedPropsStyles = _mergeAndSync3[0],\n      currentStyles = _mergeAndSync3[1],\n      currentVelocities = _mergeAndSync3[2],\n      lastIdealStyles = _mergeAndSync3[3],\n      lastIdealVelocities = _mergeAndSync3[4];\n    return {\n      currentStyles: currentStyles,\n      currentVelocities: currentVelocities,\n      lastIdealStyles: lastIdealStyles,\n      lastIdealVelocities: lastIdealVelocities,\n      mergedPropsStyles: mergedPropsStyles\n    };\n  } // after checking for unreadPropStyles != null, we manually go set the\n  // non-interpolating values (those that are a number, without a spring\n  // config)\n  ;\n  _proto.componentDidMount = function componentDidMount() {\n    this.prevTime = (0, _performanceNow[\"default\"])();\n    this.startAnimationIfNecessary();\n  };\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(props) {\n    if (this.unreadPropStyles) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyles);\n    }\n    var styles = props.styles;\n    if (typeof styles === 'function') {\n      this.unreadPropStyles = styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));\n    } else {\n      this.unreadPropStyles = styles;\n    }\n    if (this.animationID == null) {\n      this.prevTime = (0, _performanceNow[\"default\"])();\n      this.startAnimationIfNecessary();\n    }\n  };\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unmounting = true;\n    if (this.animationID != null) {\n      _raf[\"default\"].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n  _proto.render = function render() {\n    var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);\n    var renderedChildren = this.props.children(hydratedStyles);\n    return renderedChildren && _react[\"default\"].Children.only(renderedChildren);\n  };\n  return TransitionMotion;\n}(_react[\"default\"].Component);\nexports[\"default\"] = TransitionMotion;\nTransitionMotion.defaultProps = {\n  willEnter: function willEnter(styleThatEntered) {\n    return (0, _stripStyle[\"default\"])(styleThatEntered.style);\n  },\n  // recall: returning null makes the current unmounting TransitionStyle\n  // disappear immediately\n  willLeave: function willLeave() {\n    return null;\n  },\n  didLeave: function didLeave() {}\n};\nprocess.env.NODE_ENV !== \"production\" ? TransitionMotion.propTypes = {\n  defaultStyles: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    key: _propTypes[\"default\"].string.isRequired,\n    data: _propTypes[\"default\"].any,\n    style: _propTypes[\"default\"].objectOf(_propTypes[\"default\"].number).isRequired\n  })),\n  styles: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    key: _propTypes[\"default\"].string.isRequired,\n    data: _propTypes[\"default\"].any,\n    style: _propTypes[\"default\"].objectOf(_propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].object])).isRequired\n  }))]).isRequired,\n  children: _propTypes[\"default\"].func.isRequired,\n  willEnter: _propTypes[\"default\"].func,\n  willLeave: _propTypes[\"default\"].func,\n  didLeave: _propTypes[\"default\"].func\n} : void 0;","map":{"version":3,"names":["exports","__esModule","_mapToZero","_interopRequireDefault","require","_stripStyle","_stepper3","_mergeDiff","_performanceNow","_raf","_shouldStopAnimation","_react","_propTypes","obj","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","msPerFrame","rehydrateStyles","mergedPropsStyles","unreadPropStyles","plainStyles","cUnreadPropStyles","map","mergedPropsStyle","data","style","j","shouldStopAnimationAll","currentStyles","destStyles","currentVelocities","_i","mergeAndSync","willEnter","willLeave","didLeave","oldMergedPropsStyles","oldCurrentStyles","oldCurrentVelocities","oldLastIdealStyles","oldLastIdealVelocities","newMergedPropsStyles","oldIndex","oldMergedPropsStyle","leavingStyle","newCurrentStyles","newCurrentVelocities","newLastIdealStyles","newLastIdealVelocities","newMergedPropsStyleCell","foundOldIndex","plainStyle","velocity","TransitionMotion","_React$Component","props","_this","unmounting","animationID","prevTime","accumulatedTime","clearUnreadPropStyle","_mergeAndSync","state","lastIdealStyles","lastIdealVelocities","unreadPropStyle","dirty","styleValue","setState","startAnimationIfNecessary","timestamp","propStyles","styles","currentTime","timeDelta","currentFrameCompletion","Math","floor","framesToCatchUp","_mergeAndSync2","newMergedPropsStyle","newCurrentStyle","newCurrentVelocity","newLastIdealStyle","newLastIdealVelocity","newLastIdealStyleValue","newLastIdealVelocityValue","_stepper","val","stiffness","damping","precision","_stepper2","nextIdealX","nextIdealV","defaultState","_proto","_this$props","defaultStyles","defaultStyleCell","s","_mergeAndSync3","componentDidMount","UNSAFE_componentWillReceiveProps","componentWillUnmount","cancel","render","hydratedStyles","renderedChildren","children","Children","only","Component","defaultProps","styleThatEntered","process","env","NODE_ENV","propTypes","arrayOf","shape","string","isRequired","any","objectOf","number","oneOfType","func","object"],"sources":["/Users/sachins/Desktop/Projects/portfolio/node_modules/react-motion-prefixed/lib/TransitionMotion.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _mapToZero = _interopRequireDefault(require(\"./mapToZero\"));\n\nvar _stripStyle = _interopRequireDefault(require(\"./stripStyle\"));\n\nvar _stepper3 = _interopRequireDefault(require(\"./stepper\"));\n\nvar _mergeDiff = _interopRequireDefault(require(\"./mergeDiff\"));\n\nvar _performanceNow = _interopRequireDefault(require(\"performance-now\"));\n\nvar _raf = _interopRequireDefault(require(\"raf\"));\n\nvar _shouldStopAnimation = _interopRequireDefault(require(\"./shouldStopAnimation\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar msPerFrame = 1000 / 60; // the children function & (potential) styles function asks as param an\n// Array<TransitionPlainStyle>, where each TransitionPlainStyle is of the format\n// {key: string, data?: any, style: PlainStyle}. However, the way we keep\n// internal states doesn't contain such a data structure (check the state and\n// TransitionMotionState). So when children function and others ask for such\n// data we need to generate them on the fly by combining mergedPropsStyles and\n// currentStyles/lastIdealStyles\n\nfunction rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {\n  // Copy the value to a `const` so that Flow understands that the const won't\n  // change and will be non-nullable in the callback below.\n  var cUnreadPropStyles = unreadPropStyles;\n\n  if (cUnreadPropStyles == null) {\n    return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n      return {\n        key: mergedPropsStyle.key,\n        data: mergedPropsStyle.data,\n        style: plainStyles[i]\n      };\n    });\n  }\n\n  return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n    for (var j = 0; j < cUnreadPropStyles.length; j++) {\n      if (cUnreadPropStyles[j].key === mergedPropsStyle.key) {\n        return {\n          key: cUnreadPropStyles[j].key,\n          data: cUnreadPropStyles[j].data,\n          style: plainStyles[i]\n        };\n      }\n    }\n\n    return {\n      key: mergedPropsStyle.key,\n      data: mergedPropsStyle.data,\n      style: plainStyles[i]\n    };\n  });\n}\n\nfunction shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {\n  if (mergedPropsStyles.length !== destStyles.length) {\n    return false;\n  }\n\n  for (var i = 0; i < mergedPropsStyles.length; i++) {\n    if (mergedPropsStyles[i].key !== destStyles[i].key) {\n      return false;\n    }\n  } // we have the invariant that mergedPropsStyles and\n  // currentStyles/currentVelocities/last* are synced in terms of cells, see\n  // mergeAndSync comment for more info\n\n\n  for (var _i = 0; _i < mergedPropsStyles.length; _i++) {\n    if (!(0, _shouldStopAnimation[\"default\"])(currentStyles[_i], destStyles[_i].style, currentVelocities[_i])) {\n      return false;\n    }\n  }\n\n  return true;\n} // core key merging logic\n// things to do: say previously merged style is {a, b}, dest style (prop) is {b,\n// c}, previous current (interpolating) style is {a, b}\n// **invariant**: current[i] corresponds to merged[i] in terms of key\n// steps:\n// turn merged style into {a?, b, c}\n//    add c, value of c is destStyles.c\n//    maybe remove a, aka call willLeave(a), then merged is either {b, c} or {a, b, c}\n// turn current (interpolating) style from {a, b} into {a?, b, c}\n//    maybe remove a\n//    certainly add c, value of c is willEnter(c)\n// loop over merged and construct new current\n// dest doesn't change, that's owner's\n\n\nfunction mergeAndSync(willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {\n  var newMergedPropsStyles = (0, _mergeDiff[\"default\"])(oldMergedPropsStyles, destStyles, function (oldIndex, oldMergedPropsStyle) {\n    var leavingStyle = willLeave(oldMergedPropsStyle);\n\n    if (leavingStyle == null) {\n      didLeave({\n        key: oldMergedPropsStyle.key,\n        data: oldMergedPropsStyle.data\n      });\n      return null;\n    }\n\n    if ((0, _shouldStopAnimation[\"default\"])(oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {\n      didLeave({\n        key: oldMergedPropsStyle.key,\n        data: oldMergedPropsStyle.data\n      });\n      return null;\n    }\n\n    return {\n      key: oldMergedPropsStyle.key,\n      data: oldMergedPropsStyle.data,\n      style: leavingStyle\n    };\n  });\n  var newCurrentStyles = [];\n  var newCurrentVelocities = [];\n  var newLastIdealStyles = [];\n  var newLastIdealVelocities = [];\n\n  for (var i = 0; i < newMergedPropsStyles.length; i++) {\n    var newMergedPropsStyleCell = newMergedPropsStyles[i];\n    var foundOldIndex = null;\n\n    for (var j = 0; j < oldMergedPropsStyles.length; j++) {\n      if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {\n        foundOldIndex = j;\n        break;\n      }\n    } // TODO: key search code\n\n\n    if (foundOldIndex == null) {\n      var plainStyle = willEnter(newMergedPropsStyleCell);\n      newCurrentStyles[i] = plainStyle;\n      newLastIdealStyles[i] = plainStyle;\n      var velocity = (0, _mapToZero[\"default\"])(newMergedPropsStyleCell.style);\n      newCurrentVelocities[i] = velocity;\n      newLastIdealVelocities[i] = velocity;\n    } else {\n      newCurrentStyles[i] = oldCurrentStyles[foundOldIndex];\n      newLastIdealStyles[i] = oldLastIdealStyles[foundOldIndex];\n      newCurrentVelocities[i] = oldCurrentVelocities[foundOldIndex];\n      newLastIdealVelocities[i] = oldLastIdealVelocities[foundOldIndex];\n    }\n  }\n\n  return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];\n}\n\nvar TransitionMotion = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(TransitionMotion, _React$Component);\n\n  // it's possible that currentStyle's value is stale: if props is immediately\n  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n  // at 0 (didn't have time to tick and interpolate even once). If we naively\n  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n  // In reality currentStyle should be 400\n  function TransitionMotion(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.unmounting = false;\n    _this.animationID = null;\n    _this.prevTime = 0;\n    _this.accumulatedTime = 0;\n    _this.unreadPropStyles = null;\n\n    _this.clearUnreadPropStyle = function (unreadPropStyles) {\n      var _mergeAndSync = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, unreadPropStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities),\n          mergedPropsStyles = _mergeAndSync[0],\n          currentStyles = _mergeAndSync[1],\n          currentVelocities = _mergeAndSync[2],\n          lastIdealStyles = _mergeAndSync[3],\n          lastIdealVelocities = _mergeAndSync[4];\n\n      for (var i = 0; i < unreadPropStyles.length; i++) {\n        var unreadPropStyle = unreadPropStyles[i].style;\n        var dirty = false;\n\n        for (var key in unreadPropStyle) {\n          if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {\n            continue;\n          }\n\n          var styleValue = unreadPropStyle[key];\n\n          if (typeof styleValue === 'number') {\n            if (!dirty) {\n              dirty = true;\n              currentStyles[i] = _extends({}, currentStyles[i]);\n              currentVelocities[i] = _extends({}, currentVelocities[i]);\n              lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n              lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n              mergedPropsStyles[i] = {\n                key: mergedPropsStyles[i].key,\n                data: mergedPropsStyles[i].data,\n                style: _extends({}, mergedPropsStyles[i].style)\n              };\n            }\n\n            currentStyles[i][key] = styleValue;\n            currentVelocities[i][key] = 0;\n            lastIdealStyles[i][key] = styleValue;\n            lastIdealVelocities[i][key] = 0;\n            mergedPropsStyles[i].style[key] = styleValue;\n          }\n        }\n      } // unlike the other 2 components, we can't detect staleness and optionally\n      // opt out of setState here. each style object's data might contain new\n      // stuff we're not/cannot compare\n\n\n      _this.setState({\n        currentStyles: currentStyles,\n        currentVelocities: currentVelocities,\n        mergedPropsStyles: mergedPropsStyles,\n        lastIdealStyles: lastIdealStyles,\n        lastIdealVelocities: lastIdealVelocities\n      });\n    };\n\n    _this.startAnimationIfNecessary = function () {\n      if (_this.unmounting || _this.animationID != null) {\n        return;\n      } // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n\n\n      _this.animationID = (0, _raf[\"default\"])(function (timestamp) {\n        // https://github.com/chenglou/react-motion/pull/420\n        // > if execution passes the conditional if (this.unmounting), then\n        // executes async defaultRaf and after that component unmounts and after\n        // that the callback of defaultRaf is called, then setState will be called\n        // on unmounted component.\n        if (_this.unmounting) {\n          return;\n        }\n\n        var propStyles = _this.props.styles;\n        var destStyles = typeof propStyles === 'function' ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles; // check if we need to animate in the first place\n\n        if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.accumulatedTime = 0;\n          return;\n        }\n\n        var currentTime = timestamp || (0, _performanceNow[\"default\"])();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta; // more than 10 frames? prolly switched browser tab. Restart\n\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n\n          _this.startAnimationIfNecessary();\n\n          return;\n        }\n\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\n        var _mergeAndSync2 = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities),\n            newMergedPropsStyles = _mergeAndSync2[0],\n            newCurrentStyles = _mergeAndSync2[1],\n            newCurrentVelocities = _mergeAndSync2[2],\n            newLastIdealStyles = _mergeAndSync2[3],\n            newLastIdealVelocities = _mergeAndSync2[4];\n\n        for (var i = 0; i < newMergedPropsStyles.length; i++) {\n          var newMergedPropsStyle = newMergedPropsStyles[i].style;\n          var newCurrentStyle = {};\n          var newCurrentVelocity = {};\n          var newLastIdealStyle = {};\n          var newLastIdealVelocity = {};\n\n          for (var key in newMergedPropsStyle) {\n            if (!Object.prototype.hasOwnProperty.call(newMergedPropsStyle, key)) {\n              continue;\n            }\n\n            var styleValue = newMergedPropsStyle[key];\n\n            if (typeof styleValue === 'number') {\n              newCurrentStyle[key] = styleValue;\n              newCurrentVelocity[key] = 0;\n              newLastIdealStyle[key] = styleValue;\n              newLastIdealVelocity[key] = 0;\n            } else {\n              var newLastIdealStyleValue = newLastIdealStyles[i][key];\n              var newLastIdealVelocityValue = newLastIdealVelocities[i][key];\n\n              for (var j = 0; j < framesToCatchUp; j++) {\n                var _stepper = (0, _stepper3[\"default\"])(msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n                newLastIdealStyleValue = _stepper[0];\n                newLastIdealVelocityValue = _stepper[1];\n              }\n\n              var _stepper2 = (0, _stepper3[\"default\"])(msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision),\n                  nextIdealX = _stepper2[0],\n                  nextIdealV = _stepper2[1];\n\n              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n              newLastIdealStyle[key] = newLastIdealStyleValue;\n              newLastIdealVelocity[key] = newLastIdealVelocityValue;\n            }\n          }\n\n          newLastIdealStyles[i] = newLastIdealStyle;\n          newLastIdealVelocities[i] = newLastIdealVelocity;\n          newCurrentStyles[i] = newCurrentStyle;\n          newCurrentVelocities[i] = newCurrentVelocity;\n        }\n\n        _this.animationID = null; // the amount we're looped over above\n\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\n        _this.setState({\n          currentStyles: newCurrentStyles,\n          currentVelocities: newCurrentVelocities,\n          lastIdealStyles: newLastIdealStyles,\n          lastIdealVelocities: newLastIdealVelocities,\n          mergedPropsStyles: newMergedPropsStyles\n        });\n\n        _this.unreadPropStyles = null;\n\n        _this.startAnimationIfNecessary();\n      });\n    };\n\n    _this.state = _this.defaultState();\n    return _this;\n  }\n\n  var _proto = TransitionMotion.prototype;\n\n  _proto.defaultState = function defaultState() {\n    var _this$props = this.props,\n        defaultStyles = _this$props.defaultStyles,\n        styles = _this$props.styles,\n        willEnter = _this$props.willEnter,\n        willLeave = _this$props.willLeave,\n        didLeave = _this$props.didLeave;\n    var destStyles = typeof styles === 'function' ? styles(defaultStyles) : styles; // this is special. for the first time around, we don't have a comparison\n    // between last (no last) and current merged props. we'll compute last so:\n    // say default is {a, b} and styles (dest style) is {b, c}, we'll\n    // fabricate last as {a, b}\n\n    var oldMergedPropsStyles;\n\n    if (defaultStyles == null) {\n      oldMergedPropsStyles = destStyles;\n    } else {\n      oldMergedPropsStyles = defaultStyles.map(function (defaultStyleCell) {\n        // TODO: key search code\n        for (var i = 0; i < destStyles.length; i++) {\n          if (destStyles[i].key === defaultStyleCell.key) {\n            return destStyles[i];\n          }\n        }\n\n        return defaultStyleCell;\n      });\n    }\n\n    var oldCurrentStyles = defaultStyles == null ? destStyles.map(function (s) {\n      return (0, _stripStyle[\"default\"])(s.style);\n    }) : defaultStyles.map(function (s) {\n      return (0, _stripStyle[\"default\"])(s.style);\n    });\n    var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function (s) {\n      return (0, _mapToZero[\"default\"])(s.style);\n    }) : defaultStyles.map(function (s) {\n      return (0, _mapToZero[\"default\"])(s.style);\n    });\n\n    var _mergeAndSync3 = mergeAndSync( // Because this is an old-style createReactClass component, Flow doesn't\n    // understand that the willEnter and willLeave props have default values\n    // and will always be present.\n    willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldCurrentStyles, // oldLastIdealStyles really\n    oldCurrentVelocities // oldLastIdealVelocities really\n    ),\n        mergedPropsStyles = _mergeAndSync3[0],\n        currentStyles = _mergeAndSync3[1],\n        currentVelocities = _mergeAndSync3[2],\n        lastIdealStyles = _mergeAndSync3[3],\n        lastIdealVelocities = _mergeAndSync3[4];\n\n    return {\n      currentStyles: currentStyles,\n      currentVelocities: currentVelocities,\n      lastIdealStyles: lastIdealStyles,\n      lastIdealVelocities: lastIdealVelocities,\n      mergedPropsStyles: mergedPropsStyles\n    };\n  } // after checking for unreadPropStyles != null, we manually go set the\n  // non-interpolating values (those that are a number, without a spring\n  // config)\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.prevTime = (0, _performanceNow[\"default\"])();\n    this.startAnimationIfNecessary();\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(props) {\n    if (this.unreadPropStyles) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyles);\n    }\n\n    var styles = props.styles;\n\n    if (typeof styles === 'function') {\n      this.unreadPropStyles = styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));\n    } else {\n      this.unreadPropStyles = styles;\n    }\n\n    if (this.animationID == null) {\n      this.prevTime = (0, _performanceNow[\"default\"])();\n      this.startAnimationIfNecessary();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unmounting = true;\n\n    if (this.animationID != null) {\n      _raf[\"default\"].cancel(this.animationID);\n\n      this.animationID = null;\n    }\n  };\n\n  _proto.render = function render() {\n    var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);\n    var renderedChildren = this.props.children(hydratedStyles);\n    return renderedChildren && _react[\"default\"].Children.only(renderedChildren);\n  };\n\n  return TransitionMotion;\n}(_react[\"default\"].Component);\n\nexports[\"default\"] = TransitionMotion;\nTransitionMotion.defaultProps = {\n  willEnter: function willEnter(styleThatEntered) {\n    return (0, _stripStyle[\"default\"])(styleThatEntered.style);\n  },\n  // recall: returning null makes the current unmounting TransitionStyle\n  // disappear immediately\n  willLeave: function willLeave() {\n    return null;\n  },\n  didLeave: function didLeave() {}\n};\nprocess.env.NODE_ENV !== \"production\" ? TransitionMotion.propTypes = {\n  defaultStyles: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    key: _propTypes[\"default\"].string.isRequired,\n    data: _propTypes[\"default\"].any,\n    style: _propTypes[\"default\"].objectOf(_propTypes[\"default\"].number).isRequired\n  })),\n  styles: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    key: _propTypes[\"default\"].string.isRequired,\n    data: _propTypes[\"default\"].any,\n    style: _propTypes[\"default\"].objectOf(_propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].object])).isRequired\n  }))]).isRequired,\n  children: _propTypes[\"default\"].func.isRequired,\n  willEnter: _propTypes[\"default\"].func,\n  willLeave: _propTypes[\"default\"].func,\n  didLeave: _propTypes[\"default\"].func\n} : void 0;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}